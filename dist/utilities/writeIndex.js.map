{"version":3,"file":"writeIndex.js","names":["directoryPaths","options","sortedDirectoryPaths","sortByDepth","filter","directoryPath","validateTargetDirectory","outputFile","silent","ignoreUnsafe","_","forEach","config","readIndexConfig","optionsWithConfig","siblings","readDirectory","indexCode","createIndexCode","indexFilePath","path","resolve","fs","writeFileSync"],"sources":["../../src/utilities/writeIndex.js"],"sourcesContent":["/**\n * @author    Adrian Stokes <adrian@anstech.co.uk>\n * @company   ANSTECH Limited\n * @copyright 2023 ANSTECH Limited\n * @license   None, all rights reserved\n */\n\nimport fs from 'fs';\nimport path from 'path';\nimport _ from 'lodash';\n\nimport createIndexCode from './createIndexCode';\nimport readDirectory from './readDirectory';\nimport readIndexConfig from './readIndexConfig';\nimport sortByDepth from './sortByDepth';\nimport validateTargetDirectory from './validateTargetDirectory';\n\nexport default (directoryPaths, options = {}) => {\n  const sortedDirectoryPaths = sortByDepth(directoryPaths)\n    .filter((directoryPath) => validateTargetDirectory(directoryPath, {\n      outputFile: options.outputFile,\n      silent: options.ignoreUnsafe,\n    }));\n\n  _.forEach(sortedDirectoryPaths, (directoryPath) => {\n    const config = readIndexConfig(directoryPath, options);\n    const optionsWithConfig = { ...options, config };\n    const siblings = readDirectory(directoryPath, optionsWithConfig);\n    const indexCode = createIndexCode(directoryPath, siblings, optionsWithConfig);\n    const indexFilePath = path.resolve(directoryPath, options.outputFile || 'index.js');\n\n    fs.writeFileSync(indexFilePath, indexCode);\n  });\n};\n"],"mappings":";;;;;;AAOA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAgE;AAfhE;AACA;AACA;AACA;AACA;AACA;AALA,eAiBe,kBAACA,cAAc,EAAmB;EAAA,IAAjBC,OAAO,uEAAG,CAAC,CAAC;EAC1C,MAAMC,oBAAoB,GAAG,IAAAC,oBAAW,EAACH,cAAc,CAAC,CACrDI,MAAM,CAAEC,aAAa,IAAK,IAAAC,gCAAuB,EAACD,aAAa,EAAE;IAChEE,UAAU,EAAEN,OAAO,CAACM,UAAU;IAC9BC,MAAM,EAAEP,OAAO,CAACQ;EAClB,CAAC,CAAC,CAAC;EAELC,eAAC,CAACC,OAAO,CAACT,oBAAoB,EAAGG,aAAa,IAAK;IACjD,MAAMO,MAAM,GAAG,IAAAC,wBAAe,EAACR,aAAa,EAAEJ,OAAO,CAAC;IACtD,MAAMa,iBAAiB,GAAG;MAAE,GAAGb,OAAO;MAAEW;IAAO,CAAC;IAChD,MAAMG,QAAQ,GAAG,IAAAC,sBAAa,EAACX,aAAa,EAAES,iBAAiB,CAAC;IAChE,MAAMG,SAAS,GAAG,IAAAC,wBAAe,EAACb,aAAa,EAAEU,QAAQ,EAAED,iBAAiB,CAAC;IAC7E,MAAMK,aAAa,GAAGC,aAAI,CAACC,OAAO,CAAChB,aAAa,EAAEJ,OAAO,CAACM,UAAU,IAAI,UAAU,CAAC;IAEnFe,WAAE,CAACC,aAAa,CAACJ,aAAa,EAAEF,SAAS,CAAC;EAC5C,CAAC,CAAC;AACJ,CAAC;AAAA"}