{"version":3,"file":"create-index.js","names":["yargs","demand","options","recursive","alias","default","description","type","ignoreUnsafe","ignoreDirectories","update","header","extensions","outputFile","noSemicolons","example","argv","writeIndexCli","_","updateIndex"],"sources":["../../src/bin/create-index.js"],"sourcesContent":["#!/usr/bin/env node\n\n/**\n * @author    Adrian Stokes <adrian@anstech.co.uk>\n * @company   ANSTECH Limited\n * @copyright 2023 ANSTECH Limited\n * @license   None, all rights reserved\n */\n\nimport yargs from 'yargs';\n\nimport {\n  writeIndexCli,\n} from '../utilities';\n\nconst { argv } = yargs\n  .demand(1)\n  .options({\n    recursive: {\n      alias: 'r',\n      default: false,\n      description: 'Create/update index files recursively. Halts on any unsafe \"index.js\" files.',\n      type: 'boolean',\n    },\n  })\n  .options({\n    ignoreUnsafe: {\n      alias: 'i',\n      default: false,\n      description: 'Ignores unsafe \"index.js\" files instead of halting.',\n      type: 'boolean',\n    },\n  })\n  .options({\n    ignoreDirectories: {\n      alias: 'd',\n      default: false,\n      description: 'Ignores importing directories into the index file, even if they have a safe \"index.js\".',\n      type: 'boolean',\n    },\n  })\n  .options({\n    update: {\n      alias: 'u',\n      default: false,\n      description: 'Updates only previously created index files (recursively).',\n      type: 'boolean',\n    },\n  })\n  .options({\n    header: {\n      description: 'Add a custom header at the top of the index files',\n      type: 'string',\n    },\n  })\n  .options({\n    extensions: {\n      alias: 'x',\n      default: ['js'],\n      description: 'Allows some extensions to be parsed as valid source. First extension will always be preferred to homonyms with another allowed extension.',\n      type: 'array',\n    },\n  })\n  .options({\n    outputFile: {\n      alias: 'o',\n      default: 'index.js',\n      description: 'Output file',\n      type: 'string',\n    },\n  })\n  .options({\n    noSemicolons: {\n      alias: 'nsc',\n      default: false,\n      description: 'No semicolons at the end of each export line',\n      type: 'boolean',\n    },\n  })\n  .example(\n    'create-index ./src ./src/utilities',\n    'Creates or updates an existing create-index index file in the target (./src, ./src/utilities) directories.',\n  )\n  .example(\n    'create-index --update ./src ./tests',\n    'Finds all create-index index files in the target directories and descending directories. Updates found index files.',\n  )\n  .example(\n    'create-index ./src --extensions js jsx',\n    'Creates or updates an existing create-index index file in the target (./src) directory for both .js and .jsx extensions.',\n  );\n\nwriteIndexCli(argv._, {\n  extensions: argv.extensions,\n  header: argv.header,\n  ignoreDirectories: argv.ignoreDirectories,\n  ignoreUnsafe: argv.ignoreUnsafe,\n  noSemicolons: argv.noSemicolons,\n  outputFile: argv.outputFile,\n  recursive: argv.recursive,\n  updateIndex: argv.update,\n});\n"],"mappings":"AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AALA;;AAOA;AAEA;AAEsB;AAEtB,8BAAiBA,cAAK,CACnBC,MAAM,CAAC,CAAC,CAAC,CACTC,OAAO,CAAC;IACPC,SAAS,EAAE;MACTC,KAAK,EAAE,GAAG;MACVC,OAAO,EAAE,KAAK;MACdC,WAAW,EAAE,8EAA8E;MAC3FC,IAAI,EAAE;IACR;EACF,CAAC,CAAC,CACDL,OAAO,CAAC;IACPM,YAAY,EAAE;MACZJ,KAAK,EAAE,GAAG;MACVC,OAAO,EAAE,KAAK;MACdC,WAAW,EAAE,qDAAqD;MAClEC,IAAI,EAAE;IACR;EACF,CAAC,CAAC,CACDL,OAAO,CAAC;IACPO,iBAAiB,EAAE;MACjBL,KAAK,EAAE,GAAG;MACVC,OAAO,EAAE,KAAK;MACdC,WAAW,EAAE,yFAAyF;MACtGC,IAAI,EAAE;IACR;EACF,CAAC,CAAC,CACDL,OAAO,CAAC;IACPQ,MAAM,EAAE;MACNN,KAAK,EAAE,GAAG;MACVC,OAAO,EAAE,KAAK;MACdC,WAAW,EAAE,4DAA4D;MACzEC,IAAI,EAAE;IACR;EACF,CAAC,CAAC,CACDL,OAAO,CAAC;IACPS,MAAM,EAAE;MACNL,WAAW,EAAE,mDAAmD;MAChEC,IAAI,EAAE;IACR;EACF,CAAC,CAAC,CACDL,OAAO,CAAC;IACPU,UAAU,EAAE;MACVR,KAAK,EAAE,GAAG;MACVC,OAAO,EAAE,CAAC,IAAI,CAAC;MACfC,WAAW,EAAE,2IAA2I;MACxJC,IAAI,EAAE;IACR;EACF,CAAC,CAAC,CACDL,OAAO,CAAC;IACPW,UAAU,EAAE;MACVT,KAAK,EAAE,GAAG;MACVC,OAAO,EAAE,UAAU;MACnBC,WAAW,EAAE,aAAa;MAC1BC,IAAI,EAAE;IACR;EACF,CAAC,CAAC,CACDL,OAAO,CAAC;IACPY,YAAY,EAAE;MACZV,KAAK,EAAE,KAAK;MACZC,OAAO,EAAE,KAAK;MACdC,WAAW,EAAE,8CAA8C;MAC3DC,IAAI,EAAE;IACR;EACF,CAAC,CAAC,CACDQ,OAAO,CACN,oCAAoC,EACpC,4GAA4G,CAC7G,CACAA,OAAO,CACN,qCAAqC,EACrC,qHAAqH,CACtH,CACAA,OAAO,CACN,wCAAwC,EACxC,0HAA0H,CAC3H;EA3EKC,IAAI,yBAAJA,IAAI;AA6EZ,IAAAC,wBAAa,EAACD,IAAI,CAACE,CAAC,EAAE;EACpBN,UAAU,EAAEI,IAAI,CAACJ,UAAU;EAC3BD,MAAM,EAAEK,IAAI,CAACL,MAAM;EACnBF,iBAAiB,EAAEO,IAAI,CAACP,iBAAiB;EACzCD,YAAY,EAAEQ,IAAI,CAACR,YAAY;EAC/BM,YAAY,EAAEE,IAAI,CAACF,YAAY;EAC/BD,UAAU,EAAEG,IAAI,CAACH,UAAU;EAC3BV,SAAS,EAAEa,IAAI,CAACb,SAAS;EACzBgB,WAAW,EAAEH,IAAI,CAACN;AACpB,CAAC,CAAC"}